<!DOCTYPE html>
<html>
<head>
	<link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAW5QTFRFAAAA////0tvZx9LPzNbT+Pn5ytTR/////f7+6+/u3OPh/f7+z9nWk6iiZ4V99vj3qbq1q7y39/n4////ssG9q7u3////zdfUz9jW////kaeh6+/uZoR82+Lhkaagrr65qru29/j4VnduU3VsMltPMFlNL1hNMFhNMlpPU3VrYoF4NFxRMVpOM1tQTnBnmq2oucbDd5GKPGJXQGZbZYN7zdfUr7+7TnFnTG9m1d7b////+fr6y9XSbYqCVHZsRGlf3uXjma2oYH929vj33+Xj8/X119/dQWZcQmddo7Ww9/j4/v7+gJmSrr654ObkQ2heVXZt3+XkpbeyYYB4d5KKobOu4OblWHlw8PPydpGJobSvwMzJR2thfpeQ09zacY2ForSv4eflQGVb1Nza/Pz8zNbTc46HT3Jol6um4ujmuMbC8vX08/b1k6iiNV1SRmpgkqeit8XCZoR7NVxSZ4V8q7u3g5yVRWpgL1hMTG9lP4p8BAAAACJ0Uk5TAAAAAAAAAAc1cJIrnef9Q9fXQyzW1gadnTXmb/yR5tbXQ85/LV8AAAABYktHRAH/Ai3eAAAACXBIWXMAAArwAAAK8AFCrDSYAAAA7UlEQVQY02NgYGBkZOfg5OLi5GBnZGQAAkYmbh5ePiUlPl4ebiagCCMzv4Cyiqqauoa6pqAQCyMDq7CIlraOrp6+gaGRsagwK4OYuImpmbmFpZWVtY2tnYQYg6SUvYOVo5OzlYurlZu7lCSDtIyHi5Wnlpe3j6+Vn7+MNINsgH+gVVCws3dIqFWYfYAsSACoIjzCOzIKIgDU4mAVHRMbF59glWgP1CIplZRslZKalp6UYZUZIyfJICZhF5yVbZWTm5dfUFgkLgZ0mGhScUlpWbmuRkWlPNBhjCxCgsqq6hXqqhrKCopsjJieQ/c+ADujLMv2KQryAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIwLTAyLTAxVDAxOjI0OjE2KzAwOjAw9SsECAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMC0wMi0wMVQwMToyNDoxNiswMDowMIR2vLQAAABGdEVYdHNvZnR3YXJlAEltYWdlTWFnaWNrIDYuNy44LTkgMjAxNC0wNS0xMiBRMTYgaHR0cDovL3d3dy5pbWFnZW1hZ2ljay5vcmfchu0AAAAAGHRFWHRUaHVtYjo6RG9jdW1lbnQ6OlBhZ2VzADGn/7svAAAAGHRFWHRUaHVtYjo6SW1hZ2U6OmhlaWdodAAxOTIPAHKFAAAAF3RFWHRUaHVtYjo6SW1hZ2U6OldpZHRoADE5MtOsIQgAAAAZdEVYdFRodW1iOjpNaW1ldHlwZQBpbWFnZS9wbmc/slZOAAAAF3RFWHRUaHVtYjo6TVRpbWUAMTU4MDUyMDI1NlX6H94AAAAPdEVYdFRodW1iOjpTaXplADBCQpSiPuwAAABWdEVYdFRodW1iOjpVUkkAZmlsZTovLy9tbnRsb2cvZmF2aWNvbnMvMjAyMC0wMi0wMS9kNzBlMmI2ZGFkYzZiYTlhZWNlY2ViNWU5YjEzNTBkMC5pY28ucG5ncxlsbQAAAABJRU5ErkJggg==" sizes="16x16" type="image/png">
	<title>Istana Buah</title>
	<style>
		body{
			text-align: center;
			align-items: center;
			font-family: sans-serif;
		}

		#title{ cursor: pointer; }

		table{
			border-collapse: collapse;
			margin: auto;
			margin-top: 10px;
		}

		table td, table th{
		  border: 1px solid #ddd;
		  padding: 5px;
		  text-align: left;
		}

		table th{
			text-align: left;
			background-color: #4CAF50;
			color: #fff;
			padding-top: 12px;
			padding-bottom: 12px;
			text-align: center;
			background-color: #4CAF50;
			color: #fff;
		}
		table tr:hover{ background: rgba(0,0,0,0.1); }
		table tr:nth-child(even){ background: #ddd; }
		.tleft{ text-align: left; }
		.tright{ text-align: right;}
		.tcenter{text-align: center;}

		.form table{
			margin: auto;
			margin-top: 20px;
			text-align: left;
		}
		.form tr, .form tr td{
			background: #fff;
			border: 0px;
			padding: 1px;
		}

		.btn{
			border: none;
			color: #fff;
			text-align: center;
			text-decoration: none;
			display: inline-block;
			font-size: 16px;
			padding: 5px;
			margin: 1px;
			border-radius: 3px;
			cursor: pointer;
		}
		.btn:hover{
			background: #fff;
			color: #000;
			padding: 4px;
			border: solid 1px #000;
		}
		.btn-hijau{ background-color: #4CAF50;}
		.btn-biru{ background-color: #008CBA;}
		.btn-merah{ background-color: #f44336;}
		.btn-hitam{ background-color: #555555;}

		a{
			text-decoration: none;
			color: #008CBA;
			padding: 3px;
		}
		a:hover{
			background-color: #008CBA;
			color: #fff;
			padding: 3px;
			border-radius: 3px;
		}

		.a-active{
			background-color: #008CBA;
			color: #fff;
			padding: 3px;
			border-radius: 3px;
		}
	</style>
</head>
<body>
	<div id="headerPage">
		<h1 id="title">Toko Istana Buah</h1>
		<h3>Dibuat Oleh: Isep Lutpi Nur</h3>
	</div>
	<div id="d_tentang" style="display: none;">
		<table class="form" style="max-width: 500px;">
			<tr>
				<td colspan="3" style="text-align: center;"><h2>Aplikasi Toko Istana buah</h2></td>
			</tr>
			<tr>
				<td colspan="3"><p>Aplikasi sangat sederhana ini bertujuan untuk mengelola toko buah, menggunakan 1 halaman dengan html dan javascrip/ Dibuat dari soal Ujian akhir semester</p></td>
			</tr>
			<tr>
				<td>Dibuat Oleh</td>
				<td>:</td>
				<td>Isep Lutpi Nur</td>
			</tr>
			<tr>
				<td>Versi</td>
				<td>:</td>
				<td>1.0</td>
			</tr>
			<tr>
				<td>Tanggal</td>
				<td>:</td>
				<td>Sabtu, 11 juli 2020</td>
			</tr>
			<tr>
				<td colspan="3" style="text-align: center;"><br>Kontak:</td>
			</tr>
			<tr>
				<td>Whatsapp</td>
				<td>:</td>
				<td><a href="https://api.whatsapp.com/send?phone=+6285798132505" target="_blank">085798132505</a></td>
			</tr>
			<tr>
				<td>Telegram</td>
				<td>:</td>
				<td><a href="https://t.me/+6285798132505" target="blank">085798132505</a></td>
			</tr>
			<tr>
				<td>Facebook</td>
				<td>:</td>
				<td><a href="https://facebook.com/iseplutpinur7" target="blank">Isef Lutfi Nur</a></td>
			</tr>
			<tr>
				<td>Github</td>
				<td>:</td>
				<td><a href="https://github.com/iseplutpinur" target="blank">Isep Lutpi Nur</a></td>
			</tr>
		</table>
		<br><br>
	</div>
	<a href="#" id="m_master_buah">Master Buah</a> |
	<a href="#" id="m_pengadaan">Pengadaan</a> |
	<a href="#" id="m_penjualan">Penjualan</a> |
	<a href="#" id="m_stok_buah">Stok Buah</a> |
	<a href="#" id="m_tentang">Tentang</a>
	<div id="d_master_buah" style="display: none;">
		<table class="form" id="d_master_buah_tambah">
			<tr>
				<td colspan="3" style="text-align: center;">
					Tambah Data Master Buah
				</td>
			</tr>
			<tr>
					<form>
					<td><label for="nama_buah_mb">Nama buah</label></td>
				<td style="width: 1px;">:</td>
				<td>
					<input type="text"id="nama_buah_mb" maxlength="25">
				</td>
			</tr>
			<tr>
				<td><label for="harga_beli_mb">Harga Beli</label></td>
				<td style="width: 1px;">:</td>
				<td>
					<input type="number"id="harga_beli_mb" maxlength="25">
				</td>
			</tr>
			<tr>
				<td><label for="harga_jual_mb">Harga Jual</label></td>
				<td style="width: 1px;">:</td>
				<td>
					<input type="number"id="harga_jual_mb" maxlength="9">
					</form>
				</td>
			</tr>
			<tr>
				<td></td>
				<td style="width: 1px;"></td>
				<td><button class="btn btn-biru" id="simpan_mb">Simpan</button></td>
			</tr>
		</table>
		<table class="form" id="d_master_buah_ubah">
			<tr>
				<td colspan="3" style="text-align: center;" id="d_master_buah_ubah_title">
				</td>
			</tr>
			<tr>
					<form>
					<td><label for="nama_buah_mb_ubah">Nama buah</label></td>
				<td style="width: 1px;">:</td>
				<td>
					<input type="text"id="nama_buah_mb_ubah" maxlength="25">
				</td>
			</tr>
			<tr>
				<td><label for="harga_beli_mb_ubah">Harga Beli</label></td>
				<td style="width: 1px;">:</td>
				<td>
					<input type="number"id="harga_beli_mb_ubah" maxlength="25">
				</td>
			</tr>
			<tr>
				<td><label for="harga_jual_mb_ubah">Harga Jual</label></td>
				<td style="width: 1px;">:</td>
				<td>
					<input type="number"id="harga_jual_mb_ubah" maxlength="9">
					<input type="number"id="id_mb_ubah" maxlength="9" hidden="">
					</form>
				</td>
			</tr>
			<tr>
				<td></td>
				<td style="width: 1px;"></td>
				<td><button class="btn btn-biru" id="simpan_mb_ubah">Simpan</button><button class="btn btn-hitam" id="kembali_mb_ubah">Kembali</button></td>
			</tr>
		</table>
		<br><span style="color: #f44336;" id="pemberitahuan_mb"></span><br>
		<div id="d_master_buah_main"></div>
	</div>
	<div id="d_pengadaan" style="display: none;">
		<table class="form" id="d_pengadaan_tambah">
			<tr>
				<td colspan="3" style="text-align: center;">
					Tambah Data Pengadaan Buah
				</td>
			</tr>
			<tr>
				<td>Nama Buah</td>
				<td style="width: 1px;">:</td>
				<td>
					<form>
					<select id="nama_buah_no_pd">
						<option value=""></option>
					</select>
				</td>
			</tr>
			<tr>
				<td><label for="nama_suplier">Nama Suplier</label></td>
				<td style="width: 1px;">:</td>
				<td>
					<input type="text"id="nama_pd" maxlength="25">
				</td>
			</tr>
			<tr>
				<td><label for="jumlah_pd">Jumlah</label></td>
				<td style="width: 1px;">:</td>
				<td>
					<input type="number"id="jumlah_pd" maxlength="9">
					</form>
				</td>
			</tr>
			<tr>
				<td></td>
				<td style="width: 1px;"></td>
				<td><button class="btn btn-biru" id="simpan_pd">Simpan</button></td>
			</tr>
		</table>
		<table class="form" id="d_pengadaan_ubah">
			<tr>
				<td colspan="3" style="text-align: center;" id="d_pengadaan_ubah_title">
				</td>
			</tr>
			<tr>
				<td>Nama Buah</td>
				<td style="width: 1px;">:</td>
				<td>
					<form>
					<select id="nama_buah_no_pd_ubah">
						<option value=""></option>
					</select>
				</td>
			</tr>
			<tr>
				<td><label for="nama_pd_ubah">Nama Suplier</label></td>
				<td style="width: 1px;">:</td>
				<td>
					<input type="text"id="nama_pd_ubah" maxlength="25">
				</td>
			</tr>
			<tr>
				<td><label for="jumlah_pd_ubah">Jumlah</label></td>
				<td style="width: 1px;">:</td>
				<td>
					<input type="number"id="jumlah_pd_ubah" maxlength="9">
					<input type="number"id="id_pd_ubah" maxlength="9" hidden="hidden">
					</form>
				</td>
			</tr>
			<tr>
				<td></td>
				<td style="width: 1px;"></td>
				<td><button class="btn btn-biru" id="simpan_pd_ubah">Simpan</button><button class="btn btn-hitam" id="kembali_pd_ubah">Kembali</button></td>
			</tr>
		</table>
		<br><span style="color: #f44336;" id="pemberitahuan_pd"></span><br>
		<div id="d_pengadaan_main"></div>
	</div>
	<div id="d_penjualan" style="display: none;">
		<table class="form" id="d_penjualan_tambah">
			<tr>
				<td colspan="3" style="text-align: center;">
					Tambah Data Penjualan Buah
				</td>
			</tr>
			<tr>
				<td>Nama Buah</td>
				<td style="width: 1px;">:</td>
				<td>
					<form>
					<select id="nama_buah_no_pj">
						<option value=""></option>
					</select>
				</td>
			</tr>
			<tr>
				<td><label for="nama_suplier">Nama Pembeli</label></td>
				<td style="width: 1px;">:</td>
				<td>
					<input type="text"id="nama_pj" maxlength="25">
				</td>
			</tr>
			<tr>
				<td><label for="jumlah">Jumlah</label></td>
				<td style="width: 1px;">:</td>
				<td>
					<input type="number"id="jumlah_pj" maxlength="9">
					</form>
				</td>
			</tr>
			<tr>
				<td></td>
				<td style="width: 1px;"></td>
				<td><button class="btn btn-biru" id="simpan_pj">Simpan</button></td>
			</tr>
		</table>
		<table class="form" id="d_penjualan_ubah">
			<tr>
				<td colspan="3" style="text-align: center;" id="d_penjualan_ubah_title">
				</td>
			</tr>
			<tr>
				<td>Nama Buah</td>
				<td style="width: 1px;">:</td>
				<td>
					<form>
					<select id="nama_buah_no_pj_ubah">
						<option value=""></option>
					</select>
				</td>
			</tr>
			<tr>
				<td><label for="nama_pj_ubah">Nama Pembeli</label></td>
				<td style="width: 1px;">:</td>
				<td>
					<input type="text"id="nama_pj_ubah" maxlength="25">
				</td>
			</tr>
			<tr>
				<td><label for="jumlah_pj_ubah">Jumlah</label></td>
				<td style="width: 1px;">:</td>
				<td>
					<input type="number"id="jumlah_pj_ubah" maxlength="9">
					<input type="number"id="id_pj_ubah" maxlength="9" hidden="hidden">
					</form>
				</td>
			</tr>
			<tr>
				<td></td>
				<td style="width: 1px;"></td>
				<td><button class="btn btn-biru" id="simpan_pj_ubah">Simpan</button><button class="btn btn-hitam" id="kembali_pj_ubah">Kembali</button></td>
			</tr>
		</table>
		<br><span style="color: #f44336;" id="pemberitahuan_pj"></span><br>
		<div id="d_penjualan_main"></div>
	</div>
	<div id="d_stok_buah" style="display: none;"></div>
</body>
</html>
<script>
// title main
	const title = getById("title");
	var temp = [];

// variable data
	// master buah
		var mb_nama = [
			"Jeruk", "Mangga", "Melon",
			"Semangka", "Durian"
		];

		var mb_harga_beli = [
			5000, 8000, 15000,
			13000, 80000
		];
		var mb_harga_jual = [
			6000, 9000, 17000,
			15000, 100000
		];
	// pengadaan
		var pd_nama = [
			"sarana buah", "dunia buah",
			"sarana buah"
		];

		var pd_buah = [
			0, 2, 3
		];

		var pd_qty = [
			80, 20, 30
	// penjualan
		]
		var pj_nama = [
			"Fransiska", "Yudi",
			"Nia"
		];

		var pj_buah = [
			0, 3, 0
		];

		var pj_qty = [
			20, 5, 30
		]

// fungsi untuk mengelola page menu
	function _master_buahFun(x){
		var no = 0;
		var html1 = "<table><thead><tr><th>NO</th><th>Nama</th><th>Harga jual</th><th>Harga Beli</th><th>Aksi</th></tr></thead><tbody>";
		for (var i = mb_nama.length - 1; i >= 0 ; i--) {
			html1 +=
			"<tr><td>" + ++no
			+ "</td><td>" +  mb_nama[i]
			+ "</td><td class='tright'>" + mb_harga_jual[i]
			+ "</td><td class='tright'>" + mb_harga_beli[i]
			+ "</td><td class='tright'><button class=\"btn btn-merah\" type=\"button\" onclick=\"hapusDataMb(" + i + ")\">Hapus</button>"
			+ "<button class=\"btn btn-biru\" type=\"button\" onclick=\"ubahDataMb(" + i + ")\">Ubah</button>"
			+ "</td></tr>";
		}
		if(mb_nama.length == 0) html1 += "<tr><td style=\"text-align: center;\" colspan=\"5\">Data Tidak Tersedia</td></tr>";
		html1 += "</tbody></table>";
		htmlById("d" + x + "_main", html1);
	}

	function _pengadaanFun(x){
		var no = 0;
		var html1 = "<table><thead><tr><th>NO</th><th>Nama Suplier</th><th>Buah</th><th>Harga Satuan</th><th>Qty</th><th>Harga jual</th></th><th>Aksi</th></tr></thead><tbody>";
		for (var i = pd_nama.length - 1; i >= 0; i--) {
			html1 +=
			"<tr><td>" + ++no
			+ "</td><td>" + pd_nama[i]
			+ "</td><td>" + mb_nama[pd_buah[i]]
			+ "</td><td class='tright'>" +  mb_harga_jual[pd_buah[i]] 
			+ "</td><td class='tright'>" + pd_qty[i]
			+ "</td><td class='tright'>" + (pd_qty[i] * mb_harga_jual[pd_buah[i]])
			+ "</td><td class='tright'><button class=\"btn btn-merah\" type=\"button\" onclick=\"hapusDataPd(" + i + ")\">Hapus</button>"
			+ "<button class=\"btn btn-biru\" type=\"button\" onclick=\"ubahDataPd(" + i + ")\">Ubah</button>"
			+ "</td></tr>";
		}
		if(pd_nama.length == 0) html1 += "<tr><td style=\"text-align: center;\" colspan=\"7\">Data Tidak Tersedia</td></tr>";
		html1 += "</tbody></table>";
		htmlById("d" + x + "_main", html1);
	}

	function _penjualanFun(x){
		var no = 0;
		var html1 = "<table><thead><tr><th>NO</th><th>Nama Suplier</th><th>Buah</th><th>Harga Satuan</th><th>Qty</th><th>Harga jual</th></th><th>Aksi</th></tr></thead><tbody>";
		for (var i = pj_nama.length - 1; i >= 0 ; i--) {
			html1 +=
			"<tr><td>" + ++no
			+ "</td><td>" + pj_nama[i]
			+ "</td><td>" + mb_nama[pj_buah[i]]
			+ "</td><td class='tright'>" +  mb_harga_jual[pj_buah[i]] 
			+ "</td><td class='tright'>" + pj_qty[i]
			+ "</td><td class='tright'>" + (pj_qty[i] * mb_harga_jual[pj_buah[i]])
			+ "</td><td class='tright'><button class=\"btn btn-merah\" type=\"button\" onclick=\"hapusDataPj(" + i + ")\">Hapus</button>"
			+ "<button class=\"btn btn-biru\" type=\"button\" onclick=\"ubahDataPj(" + i + ")\">Ubah</button>"
			+ "</td></tr>";
		}
		if(pj_nama.length == 0) html1 += "<tr><td style=\"text-align: center;\" colspan=\"7\">Data Tidak Tersedia</td></tr>";
		html1 += "</tbody></table>";
		htmlById("d" + x + "_main", html1);
	}

	function _stok_buahFun(x){
		var no = 0;
		var html1 = "<br><br><table><thead><tr><th>NO</th><th>Nama Buah</th><th>Pengadaan</th><th>Penjualan</th></th><th>Stok Akhir</th></tr></thead><tbody>";
		for (var i = mb_nama.length - 1; i >= 0; i--) {
			html1 +=
			"<tr><td>" + ++no
			+ "</td><td>" +  mb_nama[i]
			+ "</td><td class='tright'>" + zeroHide(hitung_stok(i, "pengadaan"))
			+ "</td><td class='tright'>" + zeroHide(hitung_stok(i))
			+ "</td><td class='tright'>" + zeroHide(cekStok(i))
			+ "</td></tr>";
		}
		if(mb_nama.length == 0) html1 += "<tr><td style=\"text-align: center;\" colspan=\"5\">Data Tidak Tersedia</td></tr>";
		html1 += "</tbody></table>";
		htmlById("d" + x, html1);
	}

	function hitung_stok(x = 0, y = ""){
		var total = 0;
		if (y == "pengadaan") {
			for(var i = 0; i < pd_nama.length; i++){
				if (pd_buah[i] == x) { total = total + pd_qty[i]; }
			}
		}
		else {
			for(var i = 0; i < pj_nama.length; i++){
				if (pj_buah[i] == x) { total = total + pj_qty[i]; }
			}
		}
		return total;
	}

	function zeroHide(x = 0){
		x = (x == 0) ? "" : x;
		return x;
	}

// variable menu
	const m_master_buah = getById("m_master_buah");
	const m_pengadaan = getById("m_pengadaan");
	const m_penjualan = getById("m_penjualan");
	const m_stok_buah = getById("m_stok_buah");
	const simpan_pd = getById("simpan_pd");
	const simpan_pj = getById("simpan_pj");

// variable display
	var d_master_buah = getById("d_master_buah");
	var d_pengadaan = getById("d_pengadaan");
	var d_penjualan = getById("d_penjualan");
	var d_stok_buah = getById("d_stok_buah");
	var d_tentang = getById("d_tentang");

// variable untuk mengatur dispaly
	var con_menu = [
	"_master_buah",
	"_pengadaan",
	"_penjualan",
	"_stok_buah",
	"_tentang"
	];

// click
	m_master_buah.addEventListener("click", function(){ mFun("_master_buah"); });
	m_pengadaan.addEventListener("click", function(){ mFun("_pengadaan"); });
	m_penjualan.addEventListener("click", function(){ mFun("_penjualan"); });
	m_stok_buah.addEventListener("click", function(){ mFun("_stok_buah"); });
	m_tentang.addEventListener("click", function(){ mFun("_tentang"); headerPage(0);});
	title.addEventListener("click", function(){ visibility(); });
	simpan_pd.addEventListener("click", function(){ simpan_Fun(); });
	simpan_pj.addEventListener("click", function(){ simpan_Fun("pj"); });

// controllers
	function visibility(x = ""){
		for (var i = con_menu.length - 1; i >= 0; i--) {
			if(con_menu[i] != x) {
				getById("d" + con_menu[i]).setAttribute('style', 'display: none;');
				getById("m" + con_menu[i]).setAttribute('href', '#');
				getById("m" + con_menu[i]).removeAttribute('class'); 
			}
			else {
				getById("d" + con_menu[i]).removeAttribute('style'); 
				getById("m" + con_menu[i]).removeAttribute('href');
				getById("m" + con_menu[i]).setAttribute('class', 'a-active');
			}
		}
	}

	function mFun(x){
		visibility(x);
		if (x == "_master_buah") {
			_master_buahFun(x);
			hideMenu("d_master_buah_ubah");
			showMenu("d_master_buah_tambah");
			alertMb();
			headerPage();
		} else if (x == "_pengadaan") { 
			_pengadaanFun(x);
			refreshBuah("pd");
			refreshBuah("pd_ubah");
			hideMenu("d_pengadaan_ubah");
			showMenu("d_pengadaan_tambah");
			headerPage();
		} else if (x == "_penjualan") {
			_penjualanFun(x);
			refreshBuah("pj");
			refreshBuah("pj_ubah");
			validasiPj();
			hideMenu("d_penjualan_ubah");
			showMenu("d_penjualan_tambah");
			headerPage();
		}
		else if (x == "_stok_buah") {
			_stok_buahFun(x);
			alertFun();
			headerPage();
		}
	}

	function refreshBuah(x = false){
		if (x != false) {
			var html1 = "";
			for(var i = 0; i < mb_nama.length; i++){
				html1 += "<option value=\"" + i + "\">" + mb_nama[i] + "</option>";
			}
			htmlById("nama_buah_no_" + x, html1);
		}
	}

// javascript query builder
	function getById(x = false){
		if (x !=false) return document.getElementById(x);
		else return null;
	}

	function htmlById(x = false, y = false){
		if (x !=false && y != false) return document.getElementById(x).innerHTML = y;
		else return null;
	}

	function valById(x = false, y = false){
		if (x !=false && y != false) return document.getElementById(x).value = y;
		else return null;
	}

// simpan data
	function simpan_Fun(x = "pd"){
		var buah = getById("nama_buah_no_" + x).value;
		var nama = getById("nama_" + x).value;
		var jumlah = getById("jumlah_" + x).value;
		if (validasiInputKosong("nama_" + x) && validasiInputKosong("jumlah_" + x)){
			if (x == "pd") {
				pd_nama.push(nama);
				pd_buah.push(buah);
				pd_qty.push(Number(jumlah));
			} else if (x == "pj"){
				pj_nama.push(nama);
				pj_buah.push(buah);
				pj_qty.push(Number(jumlah));
			} else if (x == "pd_ubah"){
				ubahDataPdAct();
			} else if (x == "pj_ubah"){
				ubahDataPjAct();
			}
			getById("nama_buah_no_" + x).value = 0;
			getById("nama_" + x).value = "";
			getById("jumlah_" + x).value = "";
			alertFun(x, "#008CBA", "Berhasil disimpan..!");
			//reload
			if (x == "pd" || x == "pd_ubah") mFun("_pengadaan");
			else mFun("_penjualan");
		} else {
			alertFun(x, "#f44336", "Tidak boleh ada kolom yang kosong atau nol");
		}
	}

	function alertFun(x = true, y = "#f44336", z = ""){
		if (x) {
			getById("pemberitahuan_pd").style.color = y;
			getById("pemberitahuan_pd").innerHTML = z;
			getById("pemberitahuan_pj").style.color = y;
			getById("pemberitahuan_pj").innerHTML = z;
		} else {
			getById("pemberitahuan_" + x).style.color = y;
			getById("pemberitahuan_" + x).innerHTML = z;
		}
	}

// validasi simpan penjualan data
	getById("nama_buah_no_pj").addEventListener("click", function(){ validasiPj() });
	getById("nama_pj").addEventListener("keyup", function(){ validasiPj() });
	getById("jumlah_pj").addEventListener("keyup", function(){ validasiPj() });

	function validasiPj(x = ""){
		var id_buah = getById("nama_buah_no_pj" + x);
		var inputJml = getById("jumlah_pj" + x).value;
		var cek = cekStok(id_buah.value) - inputJml;
		if (cek < 0){
			alertFun("pj", "#f44336", "Stok Kurang Mohon Kurangi Jumlah penjualan<br>Stok <b>" +
				mb_nama[id_buah.value] + "</b> Yang tersedia adalah <b>" + cekStok(id_buah.value) + "<b>");
			simpanButton("pj");
		} else {
			alertFun();
			simpanButton("pj", true);
		}
	}



	function cekStok(x){
		return hitung_stok(x, "pengadaan") - hitung_stok(x);
	}

	function validasiInputKosong(x){
		if(
			getById(x).value == "" || 
			getById(x).value == " " || 
			getById(x).value == "0" || 
			getById(x).value <= 0
				) {
			return false;
		} else return true;
	}

	function simpanButton(y = "pd", x = false){
		if (x) getById("simpan_" + y).removeAttribute('disabled');
		else getById("simpan_" + y).setAttribute('disabled', '');
	}

// Simpan data tambah data master buah
	// variable
		var nama_buah_mb = getById("nama_buah_mb");
		var harga_beli_mb = getById("harga_beli_mb");
		var harga_jual_mb = getById("harga_jual_mb");
		var simpan_mb = getById("simpan_mb");

	// action
	nama_buah_mb.addEventListener("keyup", function(){ validasiMb(); });
	harga_beli_mb.addEventListener("keyup", function(){ validasiMb(); });
	harga_jual_mb.addEventListener("keyup", function(){ validasiMb(); });
	simpan_mb.addEventListener("click", function(){ simpanMb(); });

	function simpanMb(){
		if (validasiMb()) {
			mb_nama.push(nama_buah_mb.value);
			mb_harga_beli.push(Number(harga_beli_mb.value));
			mb_harga_jual.push(Number(harga_jual_mb.value));
			resetInMb();
			mFun("_master_buah")
			alertMb("Data berhasil ditambahkan..!", "#008CBA");

		}
	}

	function validasiMb(x = ""){
		simpanButton("mb" + x);
		if (validasiInputKosong("nama_buah_mb" + x) || validasiInputKosong("harga_beli_mb" + x) || validasiInputKosong("harga_jual_mb" + x)) {
			if (cekBuah(x)) {
				if (cekHargaBuah(x)) {
					simpanButton("mb" + x, true);
					alertMb();
					return true;
				} else {
					simpanButton("mb" + x);
					alertMb("Harga jual harus lebih tinggi dari harga beli..!");
				}
			} else {
				simpanButton("mb" + x);
				alertMb("Nama Buah sudah ada..!");
			}
		} else {
			simpanButton("mb" + x);
			alertMb("Kolom harus di isi semua..!");
		}
	}

	function cekBuah(x){
		if (x == "") {
			var x = nama_buah_mb.value, cek = 0;
			for(var i = 0; i < mb_nama.length; i++){
				if (mb_nama[i].toLowerCase() == x.toLowerCase()) cek++;
			}
			cek = (cek > 0) ? false : true;
			return cek;
		} else {
			var x = nama_buah_mb_ubah.value, cek = 0;
			for(var i = 0; i < mb_nama.length; i++){
				if (i == getById("id_mb_ubah").value) continue;
				if (mb_nama[i].toLowerCase() == x.toLowerCase()) cek++;
			}
			cek = (cek > 0) ? false : true;
			return cek;	
		}
	}

	function cekHargaBuah(x){
		if (x == "") {
			var x = Number(harga_jual_mb.value);
			var y = Number(harga_beli_mb.value);
		} else {
			var x = Number(harga_jual_mb_ubah.value);
			var y = Number(harga_beli_mb_ubah.value);
		}
		if (x > 0 && y > 0) {
			if (x > y) return true;
			else return false;
		} else return false;
	}

	function resetInMb(){
		nama_buah_mb.value = "";
		harga_beli_mb.value = "";
		harga_jual_mb.value = "";
	}

	function alertMb(x = "", y = "#f44336") {
		getById("pemberitahuan_mb").style.color = y;
		getById("pemberitahuan_mb").innerHTML = x;
	}


// hapus data
	function hapusDataMb(x, y = ""){
		if (y == "hapusDataMbAct"){
			relationMbHapus(x);
			mb_nama = hapusArr(mb_nama, x);
			mb_harga_jual = hapusArr(mb_harga_jual, x);
			mb_harga_beli = hapusArr(mb_harga_beli, x);
			mFun("_master_buah");
			alertMb("Sukses.. !, Data <b>" + temp[0] + "</b> Berhasil dihapus..!", "#008CBA");
		} else {
			temp[0] = mb_nama[x];
			temp[1] = x;
			alertMb("<b>Peringatan..!</b>, Mengubah data ini akan mengubah data pada tabel lain."
				+ "<br>Data <b>" + mb_nama[x] + "</b> Pada tabel <b>Pengadaan</b> dan <b>Penjualan</b> Akan ikut terhapus"
				+ "<br>Apakah anda yakin data <b>" + mb_nama[x] + "</b> Akan dihapus..? <br>"
				+ "<button class=\"btn btn-merah\"onclick=\"hapusDataMb(" + temp[1] + ",'hapusDataMbAct',)\">Ya</button> Atau "
				+ "<button class=\"btn btn-hitam\"onclick=\"mFun('_master_buah')\">Tidak</button>");
		}
	}

	function relationMbHapus(x){
		for (var i = 0; i < pd_buah.length; i++){
			if (pd_buah[i] == x ) {
				pd_buah = hapusArr(pd_buah, i);
				pd_qty = hapusArr(pd_qty, i);
				pd_nama = hapusArr(pd_nama, i);
			}
		}
		for (var i = 0; i < pd_buah.length; i++){
			if (pd_buah[i] > x ) {
				pd_buah[i] -= 1;
			}
		}
		for (var i = 0; i < pj_buah.length; i++){
			if (pj_buah[i] == x ) {
				pj_buah = hapusArr(pj_buah, i);
				pj_qty = hapusArr(pj_qty, i);
				pj_nama = hapusArr(pj_nama, i);
			}
		}
		for (var i = 0; i < pj_buah.length; i++){
			if (pj_buah[i] > x ) {
				pj_buah[i] -= 1;
			}
		}
	}

	function hapusDataPd(x, y = ""){
		if (y == "hapusDataPd") {
			pd_buah = hapusArr(pd_buah, x);
			pd_qty = hapusArr(pd_qty, x);
			pd_nama = hapusArr(pd_nama, x);
			mFun("_pengadaan");
			alertFun("pd", "#008CBA", "Sukses.. !, Data <b>" + temp[0] + "</b> Berhasil dihapus..!");
		} else {
			temp[0] = pd_nama[x];
			temp[1] = x;
			alertFun("pd","#f44336" , "<b>Peringatan..!</b><br>Mengubah data ini akan mengubah data pada tabel lain."
				+ "<br>Apakah anda yakin data <b>" + pd_nama[x] + "</b> Akan dihapus..? <br>"
				+ "<button class=\"btn btn-merah\"onclick=\"hapusDataPd(" + temp[1] + ",'hapusDataPd',)\">Ya</button> Atau "
				+ "<button class=\"btn btn-hitam\"onclick=\"mFun('_master_buah')\">Tidak</button>");
		}
	}

	function hapusDataPj(x, y = ""){
		if (y == "hapusDataPj") {
			pj_buah = hapusArr(pj_buah, x);
			pj_qty = hapusArr(pj_qty, x);
			pj_nama = hapusArr(pj_nama, x);
			mFun("_penjualan");
			alertFun("pd", "#008CBA", "Sukses.. !, Data <b>" + temp[0] + "</b> Berhasil dihapus..!");
		} else {
			temp[0] = pj_nama[x];
			temp[1] = x;
			alertFun("pd","#f44336" , "<b>Peringatan..!</b><br>Mengubah data ini akan mengubah data pada tabel lain."
				+ "<br>Apakah anda yakin data <b>" + pj_nama[x] + "</b> Akan dihapus..? <br>"
				+ "<button class=\"btn btn-merah\"onclick=\"hapusDataPj(" + temp[1] + ",'hapusDataPj',)\">Ya</button> Atau "
				+ "<button class=\"btn btn-hitam\"onclick=\"mFun('_master_buah')\">Tidak</button>");
		}
	}

	function hapusArr(x, no) {
		var newArr = [];
		for(var i = 0; i < x.length; i++){
			if (i == no) continue;
			newArr.push(x[i]);
		}
		return newArr;
	}

	function showMenu(x){
		getById(x).removeAttribute('style'); 
	}

	function hideMenu(x){
		getById(x).setAttribute('style', 'display: none;');
	}
	// konfirmasi ketika pengandaan buah dihapus yang sudah ada pembelinya
	// konfirmasi master buah ketika dihapus yang buahnya sudah ada pembelinya

//ubah data
	//Master buah
	var d_master_buah_ubah_title = getById("d_master_buah_ubah_title");
	var nama_buah_mb_ubah = getById("nama_buah_mb_ubah");
	var harga_jual_mb_ubah = getById("harga_jual_mb_ubah");
	var harga_beli_mb_ubah = getById("harga_beli_mb_ubah");
	var id_mb_ubah = getById("id_mb_ubah");
	getById("kembali_mb_ubah").addEventListener("click", function() {
		showMenu("d_master_buah_tambah");
		hideMenu("d_master_buah_ubah");
		alertMb();
	});
	getById("simpan_mb_ubah").addEventListener("click", function() { ubahDataMbAct();});
	nama_buah_mb_ubah.addEventListener("keyup", function(){ validasiMb("_ubah"); });
	harga_jual_mb_ubah.addEventListener("keyup", function(){ validasiMb("_ubah"); });
	harga_beli_mb_ubah.addEventListener("keyup", function(){ validasiMb("_ubah"); });
	function ubahDataMb(x){
		d_master_buah_ubah_title.innerHTML = "Ubah data <b>" + mb_nama[x] + "</b>";
		nama_buah_mb_ubah.value = mb_nama[x];
		harga_jual_mb_ubah.value = mb_harga_jual[x];
		harga_beli_mb_ubah.value = mb_harga_beli[x];
		id_mb_ubah.value = x;
		showMenu("d_master_buah_ubah");
		hideMenu("d_master_buah_tambah");
		alertMb("<b>Peringatan..!</b><br>Mengubah data ini akan mengubah data pada tabel lain.");
	}
	// setelah di tambahkan kolom input harus kosong
	function ubahDataMbAct(){
		mb_nama[id_mb_ubah.value] = nama_buah_mb_ubah.value;
		mb_harga_jual[id_mb_ubah.value] = harga_jual_mb_ubah.value;
		mb_harga_beli[id_mb_ubah.value] = harga_beli_mb_ubah.value;
		mFun("_master_buah");
		showMenu("d_master_buah_tambah");
	}

	// Pengadaan
	var d_pengadaan_ubah_title = getById("d_pengadaan_ubah_title");
	var nama_buah_no_pd_ubah = getById("nama_buah_no_pd_ubah");
	var nama_pd_ubah = getById("nama_pd_ubah");
	var jumlah_pd_ubah = getById("jumlah_pd_ubah");
	var id_pd_ubah = getById("id_pd_ubah");
	getById("kembali_pd_ubah").addEventListener("click", function() {
		showMenu("d_pengadaan_tambah");
		hideMenu("d_pengadaan_ubah");
		alertFun();
	});
	getById("simpan_pd_ubah").addEventListener("click", function() {simpan_Fun("pd_ubah");});
	function ubahDataPd(x){
		d_pengadaan_ubah_title.innerHTML = "Ubah data <b>" + pd_nama[x] + "</b>";
		nama_buah_no_pd_ubah.value = pd_buah[x];
		nama_pd_ubah.value = pd_nama[x];
		jumlah_pd_ubah.value = Number(pd_qty[x]);
		id_pd_ubah.value = x;
		showMenu("d_pengadaan_ubah");
		hideMenu("d_pengadaan_tambah");
	}
	// display none untuk menu ubah pengadaan
	function ubahDataPdAct(){
		pd_buah[id_pd_ubah.value] = nama_buah_no_pd_ubah.value;
		pd_nama[id_pd_ubah.value] = nama_pd_ubah.value;
		pd_qty[id_pd_ubah.value] = Number(jumlah_pd_ubah.value);
		showMenu("d_pengadaan_tambah");
	}

	// Pengadaan
	var d_penjualan_ubah_title = getById("d_penjualan_ubah_title");
	var nama_buah_no_pj_ubah = getById("nama_buah_no_pj_ubah");
	var nama_pj_ubah = getById("nama_pj_ubah");
	var jumlah_pj_ubah = getById("jumlah_pj_ubah");
	var id_pj_ubah = getById("id_pj_ubah");
	nama_buah_no_pj_ubah.addEventListener("click", function(){validasiPj("_ubah");});
	nama_pj_ubah.addEventListener("keyup", function(){validasiPj("_ubah");});
	jumlah_pj_ubah.addEventListener("keyup", function(){validasiPj("_ubah");});
	getById("kembali_pj_ubah").addEventListener("click", function() {
		showMenu("d_penjualan_tambah");
		hideMenu("d_penjualan_ubah");
		mFun("_penjualan");
		alertFun();
	});
	getById("simpan_pj_ubah").addEventListener("click", function() {simpan_Fun("pj_ubah");});
	function ubahDataPj(x){
		d_penjualan_ubah_title.innerHTML = "Ubah data <b>" + pj_nama[x] + "</b>";
		nama_buah_no_pj_ubah.value = pj_buah[x];
		nama_pj_ubah.value = pj_nama[x];
		jumlah_pj_ubah.value = Number(pj_qty[x]);
		id_pj_ubah.value = x;
		hideMenu("d_penjualan_tambah");
		showMenu("d_penjualan_ubah");
		alertFun();
	}
	// display none untuk menu ubah penjualan
	function ubahDataPjAct(){
		pj_buah[id_pj_ubah.value] = nama_buah_no_pj_ubah.value;
		pj_nama[id_pj_ubah.value] = nama_pj_ubah.value;
		pj_qty[id_pj_ubah.value] = Number(jumlah_pj_ubah.value);
		mFun("_penjualan");
		showMenu("d_penjualan_tambah");
	}

	function headerPage(x = 1){
		if (x == 0) getById("headerPage").setAttribute('style', 'display: none;');
		else getById("headerPage").removeAttribute('style');
	}
</script>
